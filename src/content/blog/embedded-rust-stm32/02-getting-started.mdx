---
title: "Getting started with an STM32 Bluepill Board"
desc: "<p>We'll see how to setup a Windows PC to programing an <strong>STM32 Bluepill Board</strong> with the <strong>STLink V2</strong> programmer. We'll also upload and test a simple blinky program.</p>"
date: "2024-03-26"
category: "embedded-rust-stm32"
slug: "02-getting-started"
author: "Anant Narayan"
---

import Image from "../../../components/Image.astro"

In the last tutorial in this series, we looked at embedded programming in Rust and `no-std`. In this tutorial, we'll see how to set up a Windows PC to program an STM32 Bluepill Board using the STLink V2 programmer.

## The Hardware

We'll be using an STM32 Bluepill board, a pretty cool 32-bit microcontroller break out board. The heart of this board is the **STM32F103**, which is based on the **ARM Cortex-M3** architecture. It has around **20KB RAM** and **64KB Flash ROM** (128KB on some unoffical models). These tiny chips run at **72MHz**, *much, much* faster than the ATmega 328p microcontrollers we're used to.

<Image src="/images/embedded-rust-stm32/stm32.png"
       alt="STM32 Bluepill"
       caption="These breakout boards are pretty common and cost only $3-5!" />

One thing to note is that while Arduino boards (such as the Uno or the Mega) have **5.0V I/O**, the STM boards have **3.3V I/O**.
If we connect a 5V peripheral like a sensor or a servo directly to one of these pins, there's a good chance you'll fry your board! To prevent this, we use a neat little device called a **Logic-Level Converter/Shifter**.

<Image src="/images/embedded-rust-stm32/llc.png"
       alt="Logic level shifter"
       caption="The one pictured above is a 4-channel level shifter, meaning it can be used with 4 I/O peripherals!" />

These convert the 3.3V signals from the STM32 to 5V signals for the peripheral, and 5V signals from the peripherals to 3.3V signals for the STM32.

Now to program the STM32 with our PC, we can't just connect it via an USB cable and hit "Upload", like you could do with an Arduino. *Ah, c'est la vie!* Instead, we have to use a programmer such as the **STLink V2**.

<Image src="/images/embedded-rust-stm32/st-linkv2.png"
       alt="STLink V2"
       caption="The STLink V2 is a pretty cheap programmer+debugger for STM32/STM8 microcontroller boards." />

The STLink V2, in particular, uses the **SWD (Serial Wire Debug)** protocol to communicate between the STM32 and your PC. This lets you flash firmware on the STM32's flash memory, and also debug your program while its running. The wiring for connecting the STM32 and the STLink is as follows:

<Image src="/images/embedded-rust-stm32/stm32-stlink-connection.png"
       alt="STM32 STLink Connection"
       caption="" />

## Setting up Windows

I'm on Windows 11, so that's what I'll be using throughout the tutorial series. Most OS  related stuff talked here will be for Windows, though most stuff *should* work on other OSes.
